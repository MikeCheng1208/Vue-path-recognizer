!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var o=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"PathRecognizer"},[this._t("default",null,{text:"props test",onMouseDown:this.handleDown,onMouseUp:this.handleUp})],2)};function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function s(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}o._withStripped=!0;var u={props:{sliceCount:{type:Number,default:8},deltaMove:{type:Number,default:8},costMax:{type:Number,default:32},models:{type:Array,default:[]},onStartDraw:{type:Function,default:[]},onMovePath:{type:Function,default:function(){}},onStopDraw:{type:Function,default:function(){}},onGesture:{type:Function,default:function(){}}},data:function(){return{moveTarget:null,points:[]}},methods:{handleDown:function(t){this.moveTarget=t.currentTarget,this.points=[{x:t.clientX,y:t.clientY}],window.document.addEventListener("mouseup",this.handleUp),this.startRecording()},handleUp:function(){window.document.removeEventListener("mouseup",this.handleUp),this.stopRecording()},handleMove:function(t){var e={x:t.clientX,y:t.clientY};this.points=[].concat(s(this.points),[e]),this.onMovePath&&this.onMovePath(this.points)},startRecording:function(){this.moveTarget.addEventListener("mousemove",this.handleMove),this.onStartDraw&&this.onStartDraw()},stopRecording:function(){this.moveTarget.removeEventListener("mousemove",this.handleMove),this.onStopDraw&&this.onStopDraw(),this.points.length>=2?this.analyze():this.onGesture&&this.onGesture(null)},analyze:function(){var t=new c(this.points,this.deltaMove),e=new h(this.sliceCount,this.deltaMove,this.costMax,t).recognize(this.models);e&&(this.onGesture?this.onGesture(e.datas):this.onGesture(null))}},mounted:function(){}},h=function(){function t(e,n,o,i){a(this,t),this.sliceCount=e,this.deltMove=n,this.costMax=o,this.path=i,this.directions=this.computeDirections()}return r(t,[{key:"recognize",value:function(t){var e=Number.POSITIVE_INFINITY,n=null,o=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var u=s.value,h=this.costLeven(u.directions,this.directions);if(null!==u.filter){var c=new l(this.path.deltaPoints,this.path.boundingBox,this.directions,h);h=u.filter(c,u)}h<this.costMax&&h<e&&(e=h,n=u)}}catch(t){i=!0,r=t}finally{try{o||null==a.return||a.return()}finally{if(i)throw r}}return n}},{key:"directionCost",value:function(t,e){var n=Math.abs(t-e);return n>this.sliceCount/2&&(n=this.sliceCount-n),n}},{key:"create2dArray",value:function(t,e,n){for(var o=[],i=0;i<t;i++){o.push([]);for(var r=0;r<e;r++)o[i].push(n)}return o}},{key:"costLeven",value:function(t,e){for(var n=this.create2dArray(t.length+1,e.length+1,0),o=this.create2dArray(t.length+1,e.length+1,0),i=Number.POSITIVE_INFINITY,r=1;r<=t.length;r++)for(var s=1;s<e.length;s++)n[r][s]=this.directionCost(t[r-1],e[s-1]);for(var a=1;a<=e.length;a++)o[0][a]=i;for(var u=1;u<=t.length;u++)o[u][0]=i;o[0][0]=0;for(var h,l,c,f=0,d=1;d<=t.length;d++)for(var v=1;v<e.length;v++)f=n[d][v],h=o[d-1][v]+f,l=o[d][v-1]+f,c=o[d-1][v-1]+f,o[d][v]=Math.min(Math.min(h,l),c);return o[t.length][e.length-1]}},{key:"computeDirections",value:function(){var t=this.path.deltaPoints;if(t.count<2)return[];for(var e=[],n=2*Math.PI/this.sliceCount,o=0;o<t.length-1;o++){var i=t[o].angleWithPoint(t[o+1]);if(i<0&&(i+=2*Math.PI),i<n/2||i>2*Math.PI-n)e.push(0);else{var r=Math.round(i/n);e.push(r)}}return e}}]),t}(),l=function t(e,n,o,i){a(this,t),this.deltaPoints=e,this.boundingBox=n,this.directions=o,this.cost=i},c=function(){function t(e,n){a(this,t),this.points=[];var o=Number.POSITIVE_INFINITY;this.boundingBox=new f(o,o,-o,-o);var i=new d(e[0].x,e[0].y),r=null;this.deltaPoints=[i];var s=!0,u=!1,h=void 0;try{for(var l,c=e[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var v=l.value;r=new d(v.x,v.y),this.points.push(r),v.x<this.boundingBox.left&&(this.boundingBox.left=v.x),v.x>this.boundingBox.right&&(this.boundingBox.right=v.x),v.y<this.boundingBox.top&&(this.boundingBox.top=v.y),v.y>this.boundingBox.bottom&&(this.boundingBox.bottom=v.y),i.squareDistanceTo(r)>=n*n&&(this.deltaPoints.push(r),i=r)}}catch(t){u=!0,h=t}finally{try{s||null==c.return||c.return()}finally{if(u)throw h}}i!==r&&this.deltaPoints.push(r)}return r(t,[{key:"count",get:function(){return this.points.length}}]),t}(),f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;a(this,t),this.top=e,this.left=n,this.bottom=o,this.right=i}return r(t,[{key:"height",get:function(){return this.bottom-this.top}},{key:"width",get:function(){return this.right-this.left}}]),t}(),d=function(){function t(e,n){a(this,t),this.x=e,this.y=n}return r(t,[{key:"squareDistanceTo",value:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n}},{key:"angleWithPoint",value:function(t){var e=t.x-this.x,n=t.y-this.y;return Math.atan2(n,e)}}]),t}();var v=function(t,e,n,o,i,r,s,a){var u,h="function"==typeof t?t.options:t;if(e&&(h.render=e,h.staticRenderFns=n,h._compiled=!0),o&&(h.functional=!0),r&&(h._scopeId="data-v-"+r),s?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},h._ssrRegister=u):i&&(u=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(h.functional){h._injectStyles=u;var l=h.render;h.render=function(t,e){return u.call(e),l(t,e)}}else{var c=h.beforeCreate;h.beforeCreate=c?[].concat(c,u):[u]}return{exports:t,options:h}}(u,o,[],!1,null,null,null);v.options.__file="PathRecognizer.vue";var p=v.exports;e.default=p}]);